---
export interface Props {
    title: string;
    description?: string;
    preloadImage?: string;
}

const {
    title,
    description = "Event Horizon | Sonny Callegaro : Création de sites web, photographie et réseaux sociaux à Genève.",
    preloadImage
} = Astro.props;

// Import global styles. Astro handles bundling and optimization.
import '../styles/global.css';
---
<!DOCTYPE html>
<html lang="fr" class="zoom-110"> {/* Consider if zoom-110 is still desired globally */}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- <meta name="zoom" content="1.2"> --> <!-- Generally not recommended for accessibility, viewport handles zoom -->
    <title>{title} | Sonny Callegaro | Création Site Web Suisses, Photographie et réseaux sociaux - Genève</title>
    <meta name="description" content={description}>
    <meta name="keywords" content="site web, création site web,eventhorizon.ch,développeur web genève, site web geneve, Photographe Genève, portfolio en ligne, sonny callegaro, heg, suisse">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#000000">
    <meta name="color-scheme" content="dark">

    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

    <!-- Preload critical resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Syne:wght@400;700&display=swap" as="style" />
    {preloadImage && <link rel="preload" href={preloadImage} as="image" fetchpriority="high" />}
    <!-- Astro handles JS preloading/deferring effectively with its bundling -->

    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;700&display=swap" rel="stylesheet">
    <!-- global.css is imported above, so styles.css and flow-button.css contents should be in it -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="print" onload="this.media='all'">

    <!-- tsParticles for the particle effect -->
    <!-- Loaded in Hero.astro or here if truly global and needed before Hero script -->
    <!-- <script is:inline src="https://cdn.jsdelivr.net/npm/tsparticles-slim@2.0.6/tsparticles.slim.min.js"></script> -->

    <!-- Tailwind CSS is handled by the Astro integration, no <script src="https://cdn.tailwindcss.com"></script> needed -->
    <!-- Tailwind config is in tailwind.config.mjs -->

    <!-- GSAP for advanced animations -->
    <script is:inline src="https://cdn.jsdelivr.net/npm/gsap@3.11.4/dist/gsap.min.js"></script>
    <script is:inline src="https://cdn.jsdelivr.net/npm/gsap@3.11.4/dist/ScrollTrigger.min.js"></script>

    <!-- Alpine.js for lightweight interactivity -->
    <script is:inline src="https://cdn.jsdelivr.net/npm/alpinejs@3.12.0/dist/cdn.min.js" defer></script>

    <!-- fluid-cursor.js - if it's a global effect -->
    <script src="/fluid-cursor.js" defer></script> <!-- Place fluid-cursor.js in public/ -->

    <script>
        // Navigation progress bar logic
        // This could also be a client-side component with client:visible if more complex
        document.addEventListener('DOMContentLoaded', () => {
            const progressBar = document.getElementById('nav-progress');
            if (progressBar) {
                const updateProgressBar = () => {
                    const scrollTotal = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                    const scrolled = window.scrollY;
                    const progress = (scrolled / scrollTotal) * 100;
                    progressBar.style.width = `${progress}%`;
                };
                window.addEventListener('scroll', updateProgressBar);
                updateProgressBar(); // Initial call
            }
        });
    </script>
</head>
<body class="relative"> {/* Ensure body classes from styles.css are applied or handled by Tailwind */}
    <!-- Leaf pattern -->
    <div class="leaf-pattern"></div> {/* Ensure .leaf-pattern styles are in global.css */}

    <!-- Navigation - Progress bar -->
    <nav class="fixed w-full bg-black/80 backdrop-blur-md z-50 border-b border-white/10">
        <div class="progress-container">
            <div class="progress-bar" id="nav-progress"></div>
        </div>
    </nav>

    <main>
        <slot /> <!-- Page-specific content will be injected here -->
    </main>

    {/*
      Global scripts that need to run after DOM content or are not component-specific.
      Many scripts from your original index.html (like particles.js, sparkles.js, script.js)
      will be broken down and moved into specific components or client-side scripts in Astro.
    */}
</body>
</html>